<app-modal-popup [modalRef]="modalRef" [modalHeader]="modalHeader">
  <form name="createScheduleTemplateForm" (submit)="createScheduleTemplateSubmit($event)" method="post"
        [formGroup]="createScheduleTemplateForm" novalidate >
    <fieldset class="{{statusClass}}">
      <div class="error-message alert alert-danger">
        {{errorMsg}}
      </div>
      <div class="form-group row no-gutters">
        <div class="col-8">
          <label for="schedule-template-name">Template Name</label>
          <input type="text" class="form-control"
                 id="schedule-template-name" placeholder="" (change)="validateForm()"
                 [ngModel]="scheduleTemplateName" formControlName="templateName">
        </div>
      </div>

      <div class="row no-gutters">
        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="AllDays" id="template-all-days" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateAllDays" (change)="isDaysChecked = !isDaysChecked; hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-all-days">
            All Days
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Mon" id="template-mon" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateMonday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-mon">
            Mon
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Tue" id="template-tue" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateTuesday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-tue">
            Tue
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Wed" id="template-wed" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateWednesday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-wed">
            Wed
          </label>
        </div>
      </div>

      <div class="row no-gutters form-group">
        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Thu" id="template-thu" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateThursday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-thu">
            Thu
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Fri" id="template-fri" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateFriday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-fri">
            Fri
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Sat" id="template-sat" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateSaturday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-sat">
            Sat
          </label>
        </div>

        <div class="form-check-inline col-3">
          <input class="form-check-input" type="checkbox" #daysCheckBox
                 value="Sun" id="template-sun" [checked]="isDaysChecked" [ngModel]="isDaysChecked"
                 formControlName="templateSunday" (change)="hanleCheckboxClick( $event )">
          <label class="form-check-label" for="template-sun">
            Sun
          </label>
        </div>
      </div>

      <div #daysCheckBoxContainer class="hidden" data-day="AllDays">
        <div class="time-dynamic-sec">
          <div #AllDaysContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Mon">
        <div class="time-dynamic-sec">
          <div #MondayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Tue">
        <div class="time-dynamic-sec">
          <div #TuesdayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Wed">
        <div class="time-dynamic-sec">
          <div #WednesdayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Thu">
        <div class="time-dynamic-sec">
          <div #ThursdayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Fri">
        <div class="time-dynamic-sec">
          <div #FridayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Sat">
        <div class="time-dynamic-sec">
          <div #SaturdayContainer>
          </div>
        </div>
      </div>
      <div #daysCheckBoxContainer class="hidden" data-day="Sun">
        <div class="time-dynamic-sec">
          <div #SundayContainer>
          </div>
        </div>
      </div>


      <div class="time-dynamic-sec">
        <div #timeSectionContainer>
          <ng-template #timeSection let-localCount="localCount" let-isPlusButton="isPlusButton">
              <div id="sectionId-{{localCount}}" class="time-section-container">
                <div class="row no-gutters form-group">
                  <div class="w-100"><strong>Time</strong></div>
                  <div class="col-6 time-picker-custom">
                    <label class="mb-0">From:</label>
                    <timepicker [ngModel]="templateStartTime"
                                [showMeridian]="false"
                                [showMinutes]="true"
                                [showSeconds]="false"
                                [mousewheel]="true"
                                [arrowkeys]="true"
                                [showSpinners]="false"
                                [hourStep]="1"
                                [minuteStep]="5"
                                [min]="minTime"
                                [max]="maxTime"
                                required

                                formControlName="templateTimeFrom{{localCount}}"></timepicker>

                  </div>
                  <div class="col-6 time-picker-custom">
                    <label class="mb-0">Till:</label>
                    <timepicker [ngModel]="templateEndTime"
                                [showMeridian]="false"
                                [showMinutes]="true"
                                [showSeconds]="false"
                                [mousewheel]="true"
                                [arrowkeys]="true"
                                [showSpinners]="false"
                                [hourStep]="1"
                                [minuteStep]="5"
                                [min]="minTime"
                                [max]="maxTime"
                                required
                                (isValid)="endTimeValid( $event )"
                                formControlName="templateTimeTill{{localCount}}"></timepicker>
                  </div>
                </div>
                <div class="row no-gutters form-group">
                  <div class="w-100"><strong>Luminosity</strong></div>
                  <div class="col-5">
                    <select class="col form-control" id="template-luminosity-select{{localCount}}" name="template-luminosity-select{{localCount}}"
                            formControlName="templateLuminositySelect{{localCount}}" >
                      <option *ngFor="let optData of templateLuminosityData" [value]="optData.value" >
                        {{optData.name}}
                      </option>
                    </select>
                  </div>
                  <div class="col-7 text-right mt-1">
                    <button *ngIf="!isPlusButton" type="button" class="btn btn-primary" (click)="removeTimeLumSection($event, localCount)">-</button>
                    <button *ngIf="isPlusButton" type="button" class="btn btn-primary ml-1" (click)="addTimeLumSection($event, localCount)">+</button>
                  </div>
                </div>
              </div>
          </ng-template>
        </div>
      </div>

      <div class="row no-gutters form-group">
        <div class="buttons form-inline">
          <div class=" ">
            <button type="submit" class="btn btn-primary">Set</button>
          </div>
          <div class="ml-2">
            <button type="button" class="btn btn-primary" (click)="modalRef.hide()">Cancel</button>
          </div>
        </div>
      </div>
    </fieldset>
  </form>
</app-modal-popup>
